/*! draymaster Built on: 2015-05-15 */
var App=function(){"use strict";function init(){initLayout(),initICheck(),initSelect2(),initTableCheckable(),initLightbox(),initEnhancedAccordion(),initDataTableHelper(),initFormValidation(),initTooltips(),initDatepicker(),initTimepicker(),initColorpicker(),initAutosize(),initBackToTop()}function initLayout(){$("#site-logo").prependTo("#wrapper"),$("html").removeClass("no-js"),Nav.init(),$("body").on("touchstart.dropdown",".dropdown-menu",function(e){e.stopPropagation()})}function initTableCheckable(){$.fn.tableCheckable&&$(".table-checkable").tableCheckable().on("masterChecked",function(event,master,slaves){$.fn.iCheck&&$(slaves).iCheck("update")}).on("slaveChecked",function(event,master){$.fn.iCheck&&$(master).iCheck("update")})}function initAutosize(){$.fn.autosize&&$(".ui-textarea-autosize").each(function(){$(this).data("animate")?$(this).addClass("autosize-animate").autosize():$(this).autosize()})}function initEnhancedAccordion(){$(".accordion .accordion-toggle").on("click",function(e){$(e.target).parent().parent().parent().addClass("open")}),$(".accordion .accordion-toggle").on("click",function(){$(this).parents(".panel").siblings().removeClass("open")}),$(".accordion").each(function(){$(this).find(".panel-collapse.in").parent().addClass("open")})}function initFormValidation(){$.fn.parsley&&$(".parsley-form").each(function(){$(this).parsley({trigger:"change",errors:{container:function(element){return element.parents("form").is(".form-horizontal")?element.parents("*[class^='col-']"):element.parents(".form-group")}}})})}function initLightbox(){$.fn.magnificPopup&&($(".ui-lightbox").magnificPopup({type:"image",closeOnContentClick:!1,closeBtnInside:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0,tError:'<a href="%url%">The image #%curr%</a> could not be loaded.'}}),$(".ui-lightbox-video, .ui-lightbox-iframe").magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1}),$(".ui-lightbox-gallery").magnificPopup({delegate:"a",type:"image",tLoading:"Loading image #%curr%...",mainClass:"mfp-img-mobile",gallery:{enabled:!0,navigateByImgClick:!0,preload:[0,1]},image:{tError:'<a href="%url%">The image #%curr%</a> could not be loaded.',titleSrc:function(item){return item.el.attr("title")+"<small>by Marsel Van Oosten</small>"}}}))}function initSelect2(){$.fn.select2&&$(".ui-select2").select2({allowClear:!0,placeholder:"Select..."})}function initDatepicker(){$.fn.datepicker&&$(".ui-datepicker").datepicker({autoclose:!0})}function initTimepicker(){if($.fn.timepicker){var pickers=$(".ui-timepicker, .ui-timepicker-modal");pickers.each(function(){$(this).parent(".input-group").addClass("bootstrap-timepicker"),$(this).is(".ui-timepicker")?$(this).timepicker():$(this).timepicker({template:"modal"})})}}function initColorpicker(){$.fn.simplecolorpicker&&$(".ui-colorpicker").each(function(){var picker=$(this).data("picker");$(this).simplecolorpicker({picker:picker})})}function initTooltips(){$.fn.tooltip&&$(".ui-tooltip").tooltip(),$.fn.popover&&$(".ui-popover").popover({container:"body"})}function initICheck(){$.fn.iCheck&&$(".icheck-input").iCheck({checkboxClass:"icheckbox_minimal-blue",radioClass:"iradio_minimal-blue",inheritClass:!0}).on("ifChanged",function(e){$(e.currentTarget).trigger("change")})}function initBackToTop(){var backToTop=$("<a>",{id:"back-to-top",href:"#top"}),icon=$("<i>",{"class":"fa fa-chevron-up"});backToTop.appendTo("body"),icon.appendTo(backToTop),backToTop.hide(),$(window).scroll(function(){$(this).scrollTop()>150?backToTop.fadeIn():backToTop.fadeOut()}),backToTop.click(function(e){e.preventDefault(),$("body, html").animate({scrollTop:0},600)})}function initDataTableHelper(){$.fn.dataTable&&($('[data-provide="datatable"]').each(function(){$(this).addClass("dataTable-helper");var $thisTable,defaultOptions={paginate:!1,search:!1,info:!1,lengthChange:!1,displayRows:10},dataOptions=$(this).data(),helperOptions=$.extend(defaultOptions,dataOptions),tableConfig={};tableConfig.iDisplayLength=helperOptions.displayRows,tableConfig.bFilter=!0,tableConfig.bSort=!0,tableConfig.bPaginate=!1,tableConfig.bLengthChange=!1,tableConfig.bInfo=!1,helperOptions.paginate&&(tableConfig.bPaginate=!0),helperOptions.lengthChange&&(tableConfig.bLengthChange=!0),helperOptions.info&&(tableConfig.bInfo=!0),helperOptions.search&&$(this).parent().removeClass("datatable-hidesearch"),tableConfig.aaSorting=[],tableConfig.aoColumns=[],$(this).find("thead tr th").each(function(index){var sortable=$(this).data("sortable")===!0?!0:!1;tableConfig.aoColumns.push({bSortable:sortable}),$(this).data("direction")&&tableConfig.aaSorting.push([index,$(this).data("direction")])}),$thisTable=$(this).dataTable(tableConfig),helperOptions.search||$thisTable.parent().find(".dataTables_filter").remove();var filterableCols=$thisTable.find("thead th").filter('[data-filterable="true"]');if(filterableCols.length>0){var $row,th,$col,showFilter,columns=$thisTable.fnSettings().aoColumns;$row=$("<tr>",{cls:"dataTable-filter-row"}).appendTo($thisTable.find("thead"));for(var i=0;i<columns.length;i++)$col=$(columns[i].nTh.outerHTML),showFilter=$col.data("filterable")===!0?"show":"hide",th='<th class="'+$col.prop("class")+'">',th+='<input type="text" class="form-control input-sm '+showFilter+'" placeholder="'+$col.text()+'">',th+="</th>",$row.append(th);$row.find("th").removeClass("sorting sorting_disabled sorting_asc sorting_desc sorting_asc_disabled sorting_desc_disabled"),$thisTable.find("thead input").keyup(function(){$thisTable.fnFilter(this.value,$thisTable.oApi._fnVisibleToColumnIndex($thisTable.fnSettings(),$thisTable.find("thead input[type=text]").index(this)))}),$thisTable.addClass("datatable-columnfilter")}}),$(".dataTables_filter input").prop("placeholder","Search..."))}function debounce(func,wait,immediate){var timeout,args,context,timestamp,result;return function(){context=this,args=arguments,timestamp=new Date;var later=function(){var last=new Date-timestamp;wait>last?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args)))},callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args)),result}}var chartColors=["#e5412d","#f0ad4e","#444","#888","#555","#999","#bbb","#ccc","#eee"];return{init:init,chartColors:chartColors,debounce:debounce}}(),Nav=function(){function init(){var mainnav=$("#main-nav"),openActive=mainnav.is(".open-active"),navActive=mainnav.find("> .active");mainnav.find("> .dropdown > a").bind("click",navClick),openActive&&navActive.is(".dropdown")&&navActive.addClass("opened").find(".sub-nav").show()}function navClick(e){e.preventDefault();var li=$(this).parents("li");li.is(".opened")?closeAll():(closeAll(),li.addClass("opened").find(".sub-nav").slideDown())}function closeAll(){$(".sub-nav").slideUp().parents("li").removeClass("opened")}return{init:init}}();$(function(){App.init()});var Login=function(){"use strict";function init(){$.support.placeholder=!1;var test=document.createElement("input");"placeholder"in test&&($.support.placeholder=!0),$.support.placeholder||$("#login-form").find("label").show()}return{init:init}}();$(function(){Login.init()}),angular.module("ui.bootstrap",["ui.bootstrap.dialog","ui.bootstrap.modal","ui.bootstrap.tabs","ui.bootstrap.tooltip","ui.bootstrap.typeahead"]),angular.module("draymaster.services",["ngResource"]),angular.module("draymaster.sanitize",["ngSanitize"]),angular.module("draymaster.route",["ngRoute"]),angular.module("draymaster.fullscreen",["FBAngular"]);var appModule=angular.module("draymasterApp",["draymaster.services","draymaster.sanitize","draymaster.route","draymaster.fullscreen","ui","ui.bootstrap","ngAnimate"]);angular.module("draymasterApp").controller("AccountDetailCtrl",["$scope","$location","adminAccountService",function($scope,$location,adminAccountService){$scope.dataLoaded=!1,$scope.userDataLoaded=!1,$scope.status=!1,$scope.accountDetail=[],$scope.usersListing=[],$scope.accountHash=$location.$$absUrl.substring($location.$$absUrl.lastIndexOf("/")+1),adminAccountService.accountDetail($scope.accountHash).success(function(data){$scope.accountDetail=data,"active"==$scope.accountDetail.status&&($scope.status=!0),$scope.dataLoaded=!0})}]),angular.module("draymasterApp").controller("AccountListingCtrl",["$scope","$location","adminAccountService",function($scope,$location,adminAccountService){if($scope.urlQueryString=$location.$$absUrl.split("?"),$scope.searchParam="",$scope.urlQueryString.length>1){var searchVal=$scope.urlQueryString[1].split("=");if("undefined"!=typeof $scope.urlQueryString[1])for(var i=0;i<searchVal.length;i++)if("search"==searchVal[i]){$scope.searchParam=searchVal[i+1];break}}$scope.accounts=[],$scope.dataLoaded=!1,$scope.sort={column:"user.id",descending:!0};var col=$scope.sort.column,ord="desc";adminAccountService.allAccounts(col,ord,$scope.searchParam).success(function(data){column="usertype.id";$scope.sort;$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.accounts=data,$scope.dataLoaded=!0}),$scope.sortAccountListing=function(column){var sort=$scope.sort;$scope.tempLoadingModal=!0,sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},adminAccountService.sortAccounts(sort.column,order,$scope.searchParam).success(function(data){$scope.accounts=data,$scope.dataLoaded=!0,$scope.tempLoadingModal=!1})},$scope.changeStatus=function(e){var hash=$(e.target).data("hash");console.log(hash),adminAccountService.changeStatus(hash).success(function(){"Active"==$(e.target).html()?$(e.target).html("Inactive"):$(e.target).html("Active")})},$scope.viewAccountDetail=function(accountHash){window.location.href="/admin/account/detail/"+accountHash}}]),angular.module("draymasterApp").controller("ApprovedReportListingCtrl",["$scope","$location","reportService",function($scope,$location,reportService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.reportsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,reportService.getAllApproved($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.reportsList=response.data.data,$scope.allReports=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortReportListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteReport=function(name,id){$scope.deletedReportName=name,$scope.deletedReportId=id,$scope.openModal("confirmDelete")}}]),angular.module("draymasterApp").controller("ContactListingCtrl",["$scope","$location","contactService",function($scope,$location,contactService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"first_name",order:"asc",pages:""},$scope.pageNumbers=[],$scope.contactsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,contactService.getUserContacts($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.contactsList=response.data,$scope.allContacts=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortContactListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteContact=function(name,id){$scope.deletedContactName=name,$scope.deletedContactId=id,$scope.openModal("confirmDelete")}}]),angular.module("draymasterApp").controller("DatabankListingCtrl",["$scope","$location","databankService",function($scope,$location,databankService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"title",order:"asc",pages:""},$scope.pageNumbers=[],$scope.databankList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,databankService.getAll($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.databankList=response.data.data,$scope.allDatabanks=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortDatabankListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteDatabank=function(name,id){$scope.deletedDatabankName=name,$scope.deletedDatabankId=id,$scope.openModal("confirmDelete")}}]),angular.module("draymasterApp").controller("SliderController",["$scope","imageSliderService",function($scope,imageSliderService){$scope.images=[],$scope.init=function(){$scope.tempLoadingModal=!0,imageSliderService.getClientReportImages().success(function(response){$scope.images=response})}}]),angular.module("draymasterApp").controller("InvoiceClientCreateCtrl",["$scope","$location","invoiceClientService",function($scope,$location,invoiceClientService){$scope.urlArray=$location.$$absUrl.split("/"),$scope.reportsList=[];var id="0";$scope.ng_billing_type="hour",$scope.ng_client_id="0",$scope.ng_currency="",$scope.ng_address="",$scope.ng_hourly_rate=0,$scope.ng_visit_rate=0,$scope.ng_vat="",$scope.from_date="",$scope.to_date="",$scope.ng_total=0,$scope.ng_vat=0,$scope.ng_total_hours=0,$scope.ng_total_visits=0,$scope.ng_client_contact="",$scope.ng_address_line1="",$scope.ng_address_line2="",$scope.ng_address_city="",$scope.ng_address_zipcode="",$scope.init=function(id){$scope.ng_client_id="undefined"==typeof id?"0":id,$scope.getClientReports(),$scope.getClientInfo()},$scope.getClientInfo=function(){$scope.tempLoadingModal=!0,invoiceClientService.getClientById($scope.ng_client_id).success(function(response){$scope.clientData=response,$scope.ng_currency=response.symbol,$scope.ng_address=response.invoiceAddress,$scope.ng_hourly_rate=response.hourlyRate,$scope.ng_visit_rate=response.visitRate,$scope.ng_vat=response.vat,$scope.ng_client_contact=response.client_contact,$scope.ng_address_line1=response.address_line1,$scope.ng_address_line2=response.address_line2,$scope.ng_address_city=response.address_city,$scope.ng_address_zipcode=response.address_zipcode,$scope.ng_billing_type="hour",$scope.tempLoadingModal=!1}),$scope.getClientReports()},$scope.calculateAmount=function(){$scope.tempLoadingModal=!0,$scope.ng_total="hour"==$scope.ng_billing_type?parseFloat($scope.ng_hourly_rate)*parseFloat($scope.ng_total_hours):parseFloat($scope.ng_visit_rate)*parseFloat($scope.ng_total_visits),$scope.ng_total=$scope.ng_total+parseFloat($scope.ng_vat)*$scope.ng_total/100,$scope.tempLoadingModal=!1},$scope.getClientReports=function(){$scope.tempLoadingModal=!0,invoiceClientService.getClientReports($scope.ng_client_id,$scope.from_date,$scope.to_date).success(function(response){$scope.reportsList=response,$scope.tempLoadingModal=!1})},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")}}]),angular.module("draymasterApp").controller("InvoiceClientListingCtrl",["$scope","$location","invoiceClientService",function($scope,$location,invoiceClientService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.invoicemcsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,invoiceClientService.getInvoiceClientAll($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.invoiceclientsList=response.data.data,$scope.allInvoices=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortInvoiceclientListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteInvoice=function(name,id){$scope.invoiceclientName=name,$scope.invoiceclientId=id,$scope.openModal("confirmDelete")},$scope.approveInvoice=function(name,id){$scope.invoiceclientName=name,$scope.invoiceclientId=id,$scope.openModal("approveInvoice")},$scope.cancelInvoice=function(name,id){$scope.invoiceclientName=name,$scope.invoiceclientId=id,$scope.openModal("cancelInvoice")},$scope.viewInvoiceReports=function(name,id){$scope.tempLoadingModal=!0,invoiceClientService.getSchedule(id).success(function(response){$scope.invoiceclientData=response,$scope.tempLoadingModal=!1,$scope.openModal("viewSchedule")})}}]),angular.module("draymasterApp").controller("InvoiceMcListingCtrl",["$scope","$location","invoicemcService",function($scope,$location,invoicemcService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.invoicemcsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,invoicemcService.getInvoiceMcAll($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.invoicemcsList=response.data.data,$scope.allInvoices=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortInvoicemcListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteInvoice=function(name,id){$scope.deletedInvoicemcName=name,$scope.deletedInvoicemcId=id,$scope.openModal("confirmDelete")},$scope.viewInvoiceReports=function(name,id){$scope.tempLoadingModal=!0,invoicemcService.getSchedule(id).success(function(response){$scope.invoicemcData=response,$scope.tempLoadingModal=!1,$scope.openModal("viewSchedule")})}}]),angular.module("draymasterApp").controller("InvoiceMcListingAdminCtrl",["$scope","$location","invoiceMcService",function($scope,$location,invoicemcService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.invoicemcsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,invoicemcService.getInvoiceMcAdminAll($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.invoicemcsList=response.data.data,$scope.allInvoices=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortInvoicemcListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteInvoice=function(name,id){$scope.invoicemcName=name,$scope.invoicemcId=id,$scope.openModal("confirmDelete")},$scope.approveInvoice=function(name,id){$scope.invoicemcName=name,$scope.invoicemcId=id,$scope.openModal("approveInvoice")},$scope.cancelInvoice=function(name,id){$scope.invoicemcName=name,$scope.invoicemcId=id,$scope.openModal("cancelInvoice")},$scope.viewInvoiceReports=function(name,id){$scope.tempLoadingModal=!0,invoicemcService.getSchedule(id).success(function(response){$scope.invoicemcData=response,$scope.tempLoadingModal=!1,$scope.openModal("viewSchedule")})}}]),angular.module("draymasterApp").controller("InvoiceMcPaidListingAdminCtrl",["$scope","$location","invoiceMcService",function($scope,$location,invoicemcService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.invoicemcsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,invoicemcService.getInvoiceMcPaidAdminAll($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.invoicemcsList=response.data.data,$scope.allInvoices=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortInvoicemcListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteInvoice=function(name,id){$scope.invoicemcName=name,$scope.invoicemcId=id,$scope.openModal("confirmDelete")},$scope.approveInvoice=function(name,id){$scope.invoicemcName=name,$scope.invoicemcId=id,$scope.openModal("approveInvoice")},$scope.cancelInvoice=function(name,id){$scope.invoicemcName=name,$scope.invoicemcId=id,$scope.openModal("cancelInvoice")},$scope.viewInvoiceReports=function(name,id){$scope.tempLoadingModal=!0,invoicemcService.getSchedule(id).success(function(response){$scope.invoicemcData=response,$scope.tempLoadingModal=!1,$scope.openModal("viewSchedule")})}}]),angular.module("draymasterApp").controller("MiscellaneousCtrl",["$scope","$location",function($scope,$location){$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteRecord=function(name,id){$scope.deletedRecordName=name,$scope.deletedRecordId=id,$scope.openModal("confirmDelete")}}]),angular.module("draymasterApp").controller("ReportListingCtrl",["$scope","$location","reportService",function($scope,$location,reportService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.reportsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,reportService.getAll($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.reportsList=response.data.data,$scope.allReports=response,$scope.main.pages=response.last_page;
var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortReportListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.approveReport=function(name,id){$scope.approveReportName=name,$scope.approveReportId=id,$scope.openModal("confirmApproval")},$scope.deleteReport=function(name,id){$scope.deletedReportName=name,$scope.deletedReportId=id,$scope.openModal("confirmDelete")},$scope.sendForApproval=function(name,id){$scope.submitReportId=id,$scope.openModal("sendForApproval")}}]),angular.module("draymasterApp").controller("ReportTemplateListingCtrl",["$scope","$location","reportTemplateService",function($scope,$location,reportTemplateService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"templateName",order:"asc",pages:""},$scope.pageNumbers=[],$scope.reportTemplatesList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,reportTemplateService.getAll($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.reportTemplatesList=response.data,$scope.allReportTemplates=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortReportTemplateListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteReportTemplate=function(name,id){$scope.deletedReportTemplateName=name,$scope.deletedReportTemplateId=id,$scope.openModal("confirmDelete")}}]),angular.module("draymasterApp").controller("ReportTemplateListingMCCtrl",["$scope","$location","reportTemplateService",function($scope,$location,reportTemplateService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"templateName",order:"asc",pages:""},$scope.pageNumbers=[],$scope.reportTemplatesList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,reportTemplateService.getMcTemplates($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.reportTemplatesList=response.data,$scope.allReportTemplates=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortReportTemplateListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteReportTemplate=function(name,id){$scope.deletedReportTemplateName=name,$scope.deletedReportTemplateId=id,$scope.openModal("confirmDelete")}}]),angular.module("draymasterApp").controller("ScheduleCreateCtrl",["$scope","$location","storeService",function($scope,$location,storeService){$scope.urlArray=$location.$$absUrl.split("/");var id="0";$scope.ng_store_id="0",$scope.ng_address="",$scope.ng_door_number="",$scope.ng_door_city="",$scope.ng_door_region="",$scope.client_option="",$scope.client_options=[{id:"",name:"--Select--"}],$scope.client_id_post="",$scope.init=function(id,client_id){$scope.ng_store_id=""==id?"0":id,$scope.client_id_post=""==client_id?"":client_id,$scope.getStoreInfo()},$scope.getStoreInfo=function(){$scope.tempLoadingModal=!0,storeService.getStoreById($scope.ng_store_id).success(function(response){$scope.storeData=response,$scope.ng_address=response.address,$scope.ng_door_number=response.door_number,$scope.ng_door_city=response.door_city,$scope.ng_door_region=response.door_region,$scope.tempLoadingModal=!1}),storeService.getStoreClients($scope.ng_store_id).success(function(response){$scope.client_options=response,$scope.client_option=$scope.client_id_post,console.log($scope.client_option),$scope.tempLoadingModal=!1})},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")}}]),angular.module("draymasterApp").controller("ScheduleEditCtrl",["$scope","$location","storeService","scheduleService",function($scope,$location,storeService,scheduleService){$scope.urlArray=$location.$$absUrl.split("/");var id="0";$scope.ng_store_id="0",$scope.ng_address="",$scope.ng_door_number="",$scope.ng_door_city="",$scope.ng_door_region="",$scope.init=function(id){$scope.ng_store_id="undefined"==typeof id?"0":id,$scope.getStoreInfo()},$scope.getStoreInfo=function(){$scope.tempLoadingModal=!0,storeService.getStoreById($scope.ng_store_id).success(function(response){$scope.storeData=response,$scope.ng_address=response.address,$scope.ng_door_number=response.door_number,$scope.ng_door_city=response.door_city,$scope.ng_door_region=response.door_region,$scope.tempLoadingModal=!1})},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")}}]),angular.module("draymasterApp").controller("ScheduleListingCtrl",["$scope","$location","scheduleService",function($scope,$location,scheduleService){if($scope.urlArray=$location.$$absUrl.split("/"),$scope.urlQueryString=$location.$$absUrl.split("?"),$scope.searchParam="",$scope.urlQueryString.length>1){var searchVal=$scope.urlQueryString[1].split("=");if("undefined"!=typeof $scope.urlQueryString[1])for(var i=0;i<searchVal.length;i++)if("search"==searchVal[i]){$scope.searchParam=searchVal[i+1];break}}9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.schedulesList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,scheduleService.getAll($scope.main.page,$scope.main.orderBy,$scope.main.order,$scope.searchParam).success(function(response){$scope.dataLoaded=!0,$scope.schedulesList=response.data.data,$scope.allSchedules=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortScheduleListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteSchedule=function(name,id){$scope.deletedScheduleName=name,$scope.deletedScheduleId=id,$scope.openModal("confirmDelete")},$scope.viewSchedule=function(name,id){$scope.tempLoadingModal=!0,scheduleService.getSchedule(id).success(function(response){$scope.scheduleData=response,$scope.tempLoadingModal=!1,$scope.openModal("viewSchedule")})}}]),angular.module("draymasterApp").controller("ScheduleListingMCCtrl",["$scope","$location","scheduleService",function($scope,$location,scheduleService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"created_at",order:"desc",pages:""},$scope.pageNumbers=[],$scope.schedulesList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,scheduleService.getUserSchedules($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.schedulesList=response.data.data,$scope.allSchedules=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortScheduleListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteSchedule=function(name,id){$scope.deletedScheduleName=name,$scope.deletedScheduleId=id,$scope.openModal("confirmDelete")},$scope.viewSchedule=function(name,id){$scope.tempLoadingModal=!0,scheduleService.getScheduleMc(id).success(function(response){$scope.scheduleData=response,$scope.tempLoadingModal=!1,$scope.openModal("viewSchedule")})}}]),angular.module("draymasterApp").controller("StoreListingCtrl",["$scope","$location","storeService",function($scope,$location,storeService){if($scope.urlArray=$location.$$absUrl.split("/"),$scope.urlQueryString=$location.$$absUrl.split("?"),$scope.searchParam="",$scope.clientIdParam="",$scope.urlQueryString.length>1){var queryString=$scope.urlQueryString[1].split("&");if("undefined"!=typeof queryString)for(var i=0;i<queryString.length;i++){var queryParam=queryString[i].split("=");if("undefined"!=typeof queryParam)for(var j=0;j<queryParam.length;j++)"search"==queryParam[j]&&($scope.searchParam=queryParam[j+1]),"client_id_single"==queryParam[j]&&($scope.clientIdParam=queryParam[j+1])}}9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"corporation",order:"asc",pages:""},$scope.pageNumbers=[],$scope.storesList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,storeService.getAll($scope.main.page,$scope.main.orderBy,$scope.main.order,$scope.searchParam,$scope.clientIdParam).success(function(response){$scope.dataLoaded=!0,$scope.storesList=response.data,$scope.allStores=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortStoreListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteStore=function(name,id){$scope.deletedStoreName=name,$scope.deletedStoreId=id,$scope.openModal("confirmDelete")},$scope.viewStore=function(name,id){$scope.tempLoadingModal=!0,storeService.getStore(id).success(function(response){$scope.storeData=response.store,$scope.storeData.clients=response.clients,$scope.viewStoreName=name,$scope.viewStoreId=id,$scope.tempLoadingModal=!1,$scope.openModal("viewStore")})}}]),angular.module("draymasterApp").controller("SupervisorListingCtrl",["$scope","$location","supervisorService",function($scope,$location,supervisorService){$scope.urlArray=$location.$$absUrl.split("/"),9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"name",order:"asc",pages:""},$scope.pageNumbers=[],$scope.supervisorsList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,supervisorService.getUserSupervisors($scope.main.page,$scope.main.orderBy,$scope.main.order).success(function(response){$scope.dataLoaded=!0,$scope.supervisorsList=response.data,$scope.allSupervisors=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortSupervisorListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteSupervisor=function(name,id){$scope.deletedSupervisorName=name,$scope.deletedSupervisorId=id,$scope.openModal("confirmDelete")}}]),angular.module("draymasterApp").controller("UserStoreListingCtrl",["$scope","$location","storeService",function($scope,$location,storeService){if($scope.urlArray=$location.$$absUrl.split("/"),$scope.urlQueryString=$location.$$absUrl.split("?"),$scope.searchParam="",$scope.urlQueryString.length>1){var searchVal=$scope.urlQueryString[1].split("=");if("undefined"!=typeof $scope.urlQueryString[1])for(var i=0;i<searchVal.length;i++)if("search"==searchVal[i]){$scope.searchParam=searchVal[i+1];break}}9==$scope.urlArray.length?($scope.page=$scope.urlArray[$scope.urlArray.length-3],$scope.orderBy=$scope.urlArray[$scope.urlArray.length-2],$scope.order=$scope.urlArray[$scope.urlArray.length-1],$scope.main={page:parseInt($scope.page),orderBy:$scope.orderBy,order:$scope.order,pages:""}):$scope.main={page:1,orderBy:"corporation",order:"asc",pages:""},$scope.pageNumbers=[],$scope.storesList=[],$scope.dataLoaded=!1,$scope.sort={column:$scope.main.orderBy,descending:!1},$scope.params||($scope.params={}),$scope.init=function(){$scope.tempLoadingModal=!0,storeService.getUserStores($scope.main.page,$scope.main.orderBy,$scope.main.order,$scope.searchParam).success(function(response){$scope.dataLoaded=!0,$scope.storesList=response.data,$scope.allStores=response,$scope.main.pages=response.last_page;var startPage=$scope.main.page-4,endPage=$scope.main.page+4;0>=startPage&&(endPage-=startPage-1,startPage=1),endPage>$scope.main.pages&&(endPage=$scope.main.pages),$scope.pageNumbers=[];for(var i=startPage;endPage>=i;i++)$scope.pageNumbers.push(i);$scope.tempLoadingModal=!1})},$scope.nextPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page++,$scope.init())},$scope.prevPage=function(){$scope.main.page>1&&($scope.main.page--,$scope.init())},$scope.firstPage=function(){$scope.main.page>1&&($scope.main.page=1,$scope.init())},$scope.lastPage=function(){$scope.main.page<$scope.main.pages&&($scope.main.page=$scope.main.pages,$scope.init())},$scope.setPage=function(clicked_page){clicked_page>0&&clicked_page<=$scope.main.pages&&($scope.main.page=clicked_page,$scope.init())},$scope.sortStoreListing=function(column){var sort=$scope.sort;sort.column==column?sort.descending=!sort.descending:(sort.column=column,sort.descending=!1),order=sort.descending?"asc":"desc",$scope.selectedCls=function(column){return column==$scope.sort.column&&"sort-"+$scope.sort.descending},$scope.main.orderBy=sort.column,$scope.main.order=order,$scope.init()},$scope.openModal=function(modalName){eval("$scope."+modalName+"Modal = true")},$scope.closeModal=function(modalName){eval("$scope."+modalName+"Modal = false")},$scope.deleteStore=function(name,id){$scope.deletedStoreName=name,$scope.deletedStoreId=id,$scope.openModal("confirmDelete")},$scope.viewStore=function(name,id){$scope.tempLoadingModal=!0,storeService.getUserStore(id).success(function(response){$scope.storeData=response.store,$scope.storeData.clients=response.clients,$scope.viewStoreName=name,$scope.viewStoreId=id,$scope.tempLoadingModal=!1,$scope.openModal("viewStore")})}}]),angular.module("draymasterApp").directive("datepicker",function(){return{link:function(scope,element){element.datepicker()}}}),angular.module("draymasterApp").directive("enablePopover",function(){return{link:function(scope,element){element.popover({container:"body",html:!0})}}}),angular.module("draymasterApp").directive("icheck",["$timeout",function($timeout){return{require:"ngModel",link:function(scope,element,attrs,ngModel){return $timeout(function(){var value;return value=attrs.value,scope.$watch(attrs.ngModel,function(){$(element).iCheck("update")}),$(element).iCheck({checkboxClass:"icheckbox_minimal-blue"}).on("ifChanged",function(event){"checkbox"===$(element).attr("type")&&attrs.ngModel&&scope.$apply(function(){return ngModel.$setViewValue(event.target.checked)})})})}}}]),angular.module("draymasterApp").directive("slider",function($timeout){return{restrict:"AE",replace:!0,scope:{images:"="},link:function(scope){scope.currentIndex=0,scope.next=function(){scope.currentIndex<scope.images.length-1?scope.currentIndex++:scope.currentIndex=0},scope.prev=function(){scope.currentIndex>0?scope.currentIndex--:scope.currentIndex=scope.images.length-1},scope.$watch("currentIndex",function(){scope.images.forEach(function(image){image.visible=!1}),scope.images[scope.currentIndex].visible=!0});var timer,sliderFunc=function(){timer=$timeout(function(){scope.next(),timer=$timeout(sliderFunc,5e3)},5e3)};sliderFunc(),scope.$on("$destroy",function(){$timeout.cancel(timer)}),angular.element(document.querySelectorAll(".arrow")).one("click",function(){$timeout.cancel(timer)})},template:'<div class="slider"><div class="slide" ng-repeat="image in images" ng-show="image.visible"><img  ng-src="{{image.src}}" /></div><div class="arrows"><a href="#" ng-click="prev()"><img src="http://extremecss.com/demos/slider/img/left-arrow.png" /></a><a href="#" ng-click="next()"><img  src="http://extremecss.com/demos/slider/img/right-arrow.png" /></a></div></div>'}}),angular.module("draymasterApp").directive("mapControls",function(){return{restrict:"A",templateUrl:"/js/template/custom/mapControls.html",link:function(){}}}),angular.module("draymasterApp").directive("milesSlider",["$timeout",function($timeout){return{restrict:"A",link:function(scope,element,attrs){return $timeout(function(){element.slider({min:20,max:800,value:250,range:"min",step:5,slide:function(event,ui){scope.$apply(function(){scope.terminalGroups[attrs.milesSlider].milesServed=ui.value})}})})}}}]),angular.module("draymasterApp").directive("missingRatesDataTable",["$timeout",function($timeout){return{restrict:"A",scope:{tariff:"="},templateUrl:"/js/template/custom/missingRates.html",controller:function($scope){this.provideRates=function(){return $scope.tariff.missingRates}},link:function(){return $timeout(function(){$('#missingRatesTableSlot [data-provide="datatable"]').each(function(){$(this).addClass("dataTable-helper");var $thisTable,defaultOptions={paginate:!1,search:!1,info:!1,lengthChange:!1,displayRows:10},dataOptions=$(this).data(),helperOptions=$.extend(defaultOptions,dataOptions),tableConfig={};tableConfig.iDisplayLength=helperOptions.displayRows,tableConfig.bFilter=!0,tableConfig.bSort=!0,tableConfig.bPaginate=!1,tableConfig.bLengthChange=!1,tableConfig.bInfo=!1,helperOptions.paginate&&(tableConfig.bPaginate=!0),helperOptions.lengthChange&&(tableConfig.bLengthChange=!0),helperOptions.info&&(tableConfig.bInfo=!0),helperOptions.search&&$(this).parent().removeClass("datatable-hidesearch"),tableConfig.aaSorting=[],tableConfig.aoColumns=[],$(this).find("thead tr th").each(function(index){var sortable=$(this).data("sortable")===!0?!0:!1;tableConfig.aoColumns.push({bSortable:sortable}),$(this).data("direction")&&tableConfig.aaSorting.push([index,$(this).data("direction")])}),$thisTable=$(this).dataTable(tableConfig),helperOptions.search||$thisTable.parent().find(".dataTables_filter").remove();var filterableCols=$thisTable.find("thead th").filter('[data-filterable="true"]');if(filterableCols.length>0){var $row,th,$col,showFilter,columns=$thisTable.fnSettings().aoColumns;$row=$("<tr>",{cls:"dataTable-filter-row"}).appendTo($thisTable.find("thead"));for(var i=0;i<columns.length;i++)$col=$(columns[i].nTh.outerHTML),showFilter=$col.data("filterable")===!0?"show":"hide",th='<th class="'+$col.prop("class")+'">',th+='<input type="text" class="form-control input-sm '+showFilter+'" placeholder="'+$col.text()+'">',th+="</th>",$row.append(th);$row.find("th").removeClass("sorting sorting_disabled sorting_asc sorting_desc sorting_asc_disabled sorting_desc_disabled"),$thisTable.find("thead input").keyup(function(){$thisTable.fnFilter(this.value,$thisTable.oApi._fnVisibleToColumnIndex($thisTable.fnSettings(),$thisTable.find("thead input[type=text]").index(this)))}),$thisTable.addClass("datatable-columnfilter")}}),$(".dataTables_filter input").prop("placeholder","Search...")})}}}]),angular.module("draymasterApp").directive("paginate",["adminTerminalService",function(adminTerminalService){return{scope:{allTerminals:"=paginate"},template:'<ul class="pagination" ng-show="totalPages > 1">  <li><a ng-click="firstPage()">&laquo;</a></li>  <li><a ng-click="prevPage()">&lsaquo;</a></li>  <li ng-repeat="n in pages">    <a class="current-{{n==current_page}}" ng-bind="n" ng-click="setPage(n,orderBy,order)">1</a>  </li>  <li><a ng-click="nextPage()">&rsaquo;</a></li>  <li><a ng-click="last_page()">&raquo;</a></li></ul>',link:function(scope){var orderBy="city",order="asc";scope.nextPage=function(){scope.current_page<scope.totalPages&&scope.current_page++},scope.prevPage=function(){scope.current_page>1&&scope.current_page--},scope.firstPage=function(){scope.current_page=1},scope.last_page=function(){scope.current_page=scope.totalPages},scope.setPage=function(page,orderBy,order){scope.current_page=page,orderBy=orderBy,order=order};var paginate=function(results,oldResults){if(oldResults!==results){scope.current_page=results.current_page,scope.total=results.total,scope.totalPages=results.last_page,scope.pages=[];for(var i=1;i<=scope.totalPages;i++)scope.pages.push(i);scope.orderBy=orderBy,scope.order=order}},pageChange=function(newPage,last_page,scope){newPage!=last_page&&adminTerminalService.get({page:newPage,orderBy:orderBy,order:order},function(response){angular.copy(response.data,scope.allTerminals.data),scope.allTerminals.current_page=response.current_page},function(error){console.log(error),$scope.allTerminals.data=[]})};scope.$watch("allTerminals",paginate),scope.$watch("current_page",pageChange)}}}]),angular.module("draymasterApp").directive("ratesDataTable",["$timeout",function($timeout){return{restrict:"A",scope:{tariff:"="},templateUrl:"/js/template/custom/rates.html",controller:function($scope){this.provideRates=function(){return $scope.tariff.rates}},link:function(){return $timeout(function(){$('#ratesTableSlot [data-provide="datatable"]').each(function(){$(this).addClass("dataTable-helper");var $thisTable,defaultOptions={paginate:!1,search:!1,info:!1,lengthChange:!1,displayRows:10},dataOptions=$(this).data(),helperOptions=$.extend(defaultOptions,dataOptions),tableConfig={};tableConfig.iDisplayLength=helperOptions.displayRows,tableConfig.bFilter=!0,tableConfig.bSort=!0,tableConfig.bPaginate=!1,tableConfig.bLengthChange=!1,tableConfig.bInfo=!1,helperOptions.paginate&&(tableConfig.bPaginate=!0),helperOptions.lengthChange&&(tableConfig.bLengthChange=!0),helperOptions.info&&(tableConfig.bInfo=!0),helperOptions.search&&$(this).parent().removeClass("datatable-hidesearch"),tableConfig.aaSorting=[],tableConfig.aoColumns=[],$(this).find("thead tr th").each(function(index){var sortable=$(this).data("sortable")===!0?!0:!1;tableConfig.aoColumns.push({bSortable:sortable}),$(this).data("direction")&&tableConfig.aaSorting.push([index,$(this).data("direction")])}),$thisTable=$(this).dataTable(tableConfig),helperOptions.search||$thisTable.parent().find(".dataTables_filter").remove();var filterableCols=$thisTable.find("thead th").filter('[data-filterable="true"]');if(filterableCols.length>0){var $row,th,$col,showFilter,columns=$thisTable.fnSettings().aoColumns;$row=$("<tr>",{cls:"dataTable-filter-row"}).appendTo($thisTable.find("thead"));for(var i=0;i<columns.length;i++)$col=$(columns[i].nTh.outerHTML),showFilter=$col.data("filterable")===!0?"show":"hide",th='<th class="'+$col.prop("class")+'">',th+='<input type="text" class="form-control input-sm '+showFilter+'" placeholder="'+$col.text()+'">',th+="</th>",$row.append(th);$row.find("th").removeClass("sorting sorting_disabled sorting_asc sorting_desc sorting_asc_disabled sorting_desc_disabled"),$thisTable.find("thead input").keyup(function(){$thisTable.fnFilter(this.value,$thisTable.oApi._fnVisibleToColumnIndex($thisTable.fnSettings(),$thisTable.find("thead input[type=text]").index(this)))
}),$thisTable.addClass("datatable-columnfilter")}}),$(".dataTables_filter input").prop("placeholder","Search...")})}}}]),angular.module("draymasterApp").directive("repeatMissingRates",function(){return{require:"^missingRatesDataTable",link:function(scope,element,attrs,missingRatesCtrl){for(var rates=missingRatesCtrl.provideRates(),html="",i=0;i<rates.length;i++)html+="<tr class='clickable-missing-rate'><td class='hidden'>"+i+"</td><td>"+rates[i].city+"</td><td>"+rates[i].state+"</td><td>"+rates[i].zip+"</td><td>"+rates[i].miles+"</td></tr>";element.append(html)}}}),angular.module("draymasterApp").directive("repeatRates",function(){return{require:"^ratesDataTable",link:function(scope,element,attrs,ratesCtrl){for(var rates=ratesCtrl.provideRates(),html="",i=0;i<rates.length;i++)html+="<tr class='clickable-rate'><td class='hidden'>"+i+"</td><td>"+rates[i].city+"</td><td>"+rates[i].state+"</td><td>"+rates[i].zip+"</td><td>"+rates[i].miles+"</td><td>$"+rates[i].price+"<a href='javascript:;' style='color:#f0ad4e;padding-left:5px;'><i class='fa fa-pencil'></i></a></td><td><input type='checkbox' "+(rates[i].freeDrop?"checked":"")+" class='free-drop-checkbox'/></td></tr>";element.append(html)}}}),angular.module("draymasterApp").directive("uploadCsv",["$parse",function($parse){return{restrict:"A",link:function(scope,element,attrs){var model=$parse(attrs.uploadCsv),modelSetter=model.assign;element.bind("change",function(){scope.$apply(function(){modelSetter(scope,element[0].files[0]);var CSV_REGEX=new RegExp("^\\w+.csv$");CSV_REGEX.test(element[0].files[0].name)?(scope.uploadErrors="",scope.invalidFile=!1):(scope.uploadErrors="Invalid file format. Please upload a CSV file with no spaces or dashes in the name.",scope.invalidFile=!0)})})}}}]),angular.module("draymasterApp").directive("validateCity",["cityService","$timeout",function(cityService,$timeout){return{restrict:"A",require:"?ngModel",link:function(scope,element,attrs,ctrl){function validate(){return timer&&$timeout.cancel(timer),"allow_blanks"===attrs.validateCity&&""===element.val()?(ctrl.$setValidity("cityValidate",!0),void 0):(timer=$timeout(function(){var match="";match=cities.filter(function(item){return item===element.val()}),match.length>0?(ctrl.$setValidity("cityValidate",!0),scope.$apply()):(ctrl.$setValidity("cityValidate",!1),scope.$apply())},300),void 0)}var timer,cities=[];cityService.all().success(function(data){for(var i=0;i<data.length;i++)cities.push(data[i].city)}),element.bind("keyup",function(){validate()}),scope.$on("typeaheadSelected",function(){validate()})}}}]),angular.module("draymasterApp").directive("validateCurrency",function(){var currency_REGEX=new RegExp("^\\d+(.\\d{2})?$");return{require:"?ngModel",link:function(scope,element,attrs,ngModel){function validate(){currency_REGEX.test(ngModel.$viewValue)?ngModel.$setValidity("validateCurrency",!0):ngModel.$setValidity("validateCurrency",!1),"true"===attrs.showParentError&&(ngModel.$invalid?element.parent().addClass("has-error"):element.parent().removeClass("has-error")),scope.$$phase||scope.$apply()}var init=!1;element.bind("keyup",function(){validate()}),attrs.$observe("active",function(val){"false"===val?scope.$$phase?(ngModel.$setValidity("validateCurrency",!0),element.parent().removeClass("has-error")):scope.$apply(function(){ngModel.$setValidity("validateCurrency",!0),element.parent().removeClass("has-error")}):"true"===val&&(init===!0?validate():init=!0)})}}}),angular.module("draymasterApp").directive("validateNumber",function(){var NUMBER_REGEX=new RegExp("^[-]?[0-9]*[.]?[0-9]+$");return{require:"?ngModel",restrict:"A",link:function(scope,element,attrs,ctrl){function validate(value){return NUMBER_REGEX.test(value)?(ctrl.$setValidity("validateNumber",!0),value):(ctrl.$setValidity("validateNumber",!1),void 0)}ctrl.$parsers.unshift(validate),ctrl.$formatters.unshift(validate)}}}),angular.module("draymasterApp").directive("validateZip",function(){var ZIP_REGEX=new RegExp("^\\d{5}$"),CZIP_REGEX=new RegExp("^[ABCEGHJKLMNPRSTVXY]\\d[A-Z] ?\\d[A-Z]\\d$","i");return{require:"?ngModel",restrict:"A",link:function(scope,element,attrs,ctrl){function validate(value){return ZIP_REGEX.test(value)||CZIP_REGEX.test(value)?(ctrl.$setValidity("validateZip",!0),value):(ctrl.$setValidity("validateZip",!1),void 0)}ctrl.$parsers.unshift(validate),ctrl.$formatters.unshift(validate)}}}),angular.module("draymasterApp").filter("accessorialStatus",function(){return function(input){return input>0?"APPLIED ("+input+")":"UNUSED"}}),angular.module("draymasterApp").filter("errorCount",function(){return function(input){var errors=input;return errors>1?errors+" errors were":errors+" error was"}}),angular.module("draymasterApp").filter("properNoun",function(){return function(input){return input.charAt(0).toUpperCase()+input.slice(1)}}),angular.module("draymasterApp").filter("selectAllButtonText",function(){return function(input){return input===!1?"Select All Visible":"Unselect All Visible"}}),angular.module("draymasterApp").filter("timeRemaining",function(){return function(input){var minutes=input;if(1>=minutes)return"1 Minute";if(minutes>1&&60>=minutes)return minutes+" Minutes";var hours=Math.floor(minutes/60),updatedMinutes=minutes-60*hours;return 1===hours&&updatedMinutes>1?hours+" Hour "+updatedMinutes+" Minutes":1===hours&&1>=updatedMinutes?hours+" Hour "+updatedMinutes+" Minute":hours>1&&updatedMinutes>1?hours+" Hours "+updatedMinutes+" Minutes":hours+" Hours "+updatedMinutes+" Minute"}}),angular.module("draymasterApp").factory("adminAccountService",["$http",function($http){var baseUrl="/service/admin/account/";return{allAccounts:function(column,order,searchParam){return $http.get(baseUrl+"all/"+column+"/"+order+"?search="+searchParam)},sortAccounts:function(column,order,searchParam){return null!==column?$http.get(baseUrl+"all/"+column+"/"+order+"?search="+searchParam):void 0},accountDetail:function(accountHash){return null!==accountHash?$http.get(baseUrl+"detail/"+accountHash):void 0},usersListing:function(accountHash){return $http.get(baseUrl+"users/"+accountHash)},changeStatus:function(accountHash){return $http.get("/admin/account/changeStatus/"+accountHash+"/ajax")}}}]),angular.module("draymasterApp").factory("contactService",function($http){var baseUrlAdmin="/service/admin/contacts/",baseUrlUser="/service/contacts/";return{getAll:function(page,orderBy,order){return $http.get(baseUrlAdmin+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getContact:function(contactId){return $http.get(baseUrlAdmin+"getContact/"+contactId)},getUserContacts:function(page,orderBy,order){return $http.get(baseUrlUser+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getUserContact:function(contactId){return $http.get(baseUrlUser+"getContact/"+contactId)}}}),angular.module("draymasterApp").factory("databankService",function($http){var baseUrlAdmin="/service/databank/";return{getAll:function(page,orderBy,order){return $http.get(baseUrlAdmin+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getDatabank:function(databankId){return $http.get(baseUrlAdmin+"getDatabank/"+databankId)}}}),angular.module("draymasterApp").factory("dateService",function(){return{getCurrentDate:function(){var currentDate=new Date,day=currentDate.getDate(),month=currentDate.getMonth()+1,year=currentDate.getFullYear();return month+"-"+day+"-"+year}}}),angular.module("draymasterApp").factory("imageSliderService",function($http){var baseUrlUser="/service/images/";return{getClientReportImages:function(){return $http.get(baseUrlUser+"getReportImages")}}}),angular.module("draymasterApp").factory("invoiceClientService",function($http){var baseUrlAdmin="/service/admin/invoiceClient/";return{getClientById:function(client_id){return $http.get(baseUrlAdmin+"getClientById?client_id="+client_id)},getClientReports:function(client_id,from_date,to_date){return $http.get(baseUrlAdmin+"getClientReportsById?client_id="+client_id+"&from_date="+from_date+"&to_date="+to_date)},getInvoiceClientAll:function(page,orderBy,order){return $http.get(baseUrlAdmin+"getClientInvoicesAll?page="+page+"&orderBy="+orderBy+"&order="+order)}}}),angular.module("draymasterApp").factory("invoiceMcService",function($http){var baseUrlAdmin="/service/admin/invoicemc/",baseUrlUser="/service/invoicemc/";return{getInvoiceMcAdminAll:function(page,orderBy,order){return $http.get(baseUrlAdmin+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getInvoiceMcPaidAdminAll:function(page,orderBy,order){return $http.get(baseUrlAdmin+"getAllProcessed?page="+page+"&orderBy="+orderBy+"&order="+order)},getInvoiceMcAll:function(page,orderBy,order){return $http.get(baseUrlUser+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getInvoiceDetail:function(invoicemcId){return $http.get(baseUrlUser+"getInvoiceDetail/"+invoicemcId)}}}),angular.module("draymasterApp").factory("reportService",function($http){var baseUrlUser="/service/reports/";return{getAll:function(page,orderBy,order){return $http.get(baseUrlUser+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getAllApproved:function(page,orderBy,order){return $http.get(baseUrlUser+"getAllApproved?page="+page+"&orderBy="+orderBy+"&order="+order)},getReport:function(reportId){return $http.get(baseUrlUser+"getReport/"+reportId)}}}),angular.module("draymasterApp").factory("reportTemplateService",function($http){var baseUrlAdmin="/service/admin/reportTemplates/",baseUrlUser="/service/reportTemplates/";return{getAll:function(page,orderBy,order){return $http.get(baseUrlAdmin+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getMcTemplates:function(page,orderBy,order){return $http.get(baseUrlUser+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getReportTemplate:function(reportTemplateId){return $http.get(baseUrlAdmin+"getReportTemplate/"+reportTemplateId)}}}),angular.module("draymasterApp").factory("scheduleService",function($http){var baseUrlAdmin="/service/admin/schedules/",baseUrlUser="/service/schedules/";return{getAll:function(page,orderBy,order,searchParam){return $http.get(baseUrlAdmin+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order+"&search="+searchParam)},getSchedule:function(scheduleId){return $http.get(baseUrlAdmin+"getSchedule/"+scheduleId)},getScheduleMc:function(scheduleId){return $http.get(baseUrlUser+"getSchedule/"+scheduleId)},getUserSchedules:function(page,orderBy,order){return $http.get(baseUrlUser+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getUserSchedule:function(scheduleId){return $http.get(baseUrlUser+"getSchedule/"+scheduleId)}}}),angular.module("draymasterApp").factory("storeService",function($http){var baseUrlAdmin="/service/admin/stores/",baseUrlUser="/service/stores/";return{getAll:function(page,orderBy,order,searchParam,client_id){return $http.get(baseUrlAdmin+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order+"&search="+searchParam+"&client_id="+client_id)},getStore:function(hash){return $http.get(baseUrlAdmin+"getStore/"+hash)},getStoreById:function(storeId){return $http.get(baseUrlAdmin+"getStoreById/"+storeId)},getUserStores:function(page,orderBy,order,searchParam){return $http.get(baseUrlUser+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order+"&search="+searchParam)},getUserStore:function(hash){return $http.get(baseUrlUser+"getStore/"+hash)},getStoreClients:function(storeId){return $http.get(baseUrlAdmin+"getStoreClients/"+storeId)}}}),angular.module("draymasterApp").factory("supervisorService",function($http){var baseUrlAdmin="/service/admin/supervisors/",baseUrlUser="/service/supervisors/";return{getAll:function(page,orderBy,order){return $http.get(baseUrlAdmin+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getSupervisor:function(supervisorId){return $http.get(baseUrlAdmin+"getSupervisor/"+supervisorId)},getUserSupervisors:function(page,orderBy,order){return $http.get(baseUrlUser+"getAll?page="+page+"&orderBy="+orderBy+"&order="+order)},getUserSupervisor:function(supervisorId){return $http.get(baseUrlUser+"getSupervisor/"+supervisorId)}}});